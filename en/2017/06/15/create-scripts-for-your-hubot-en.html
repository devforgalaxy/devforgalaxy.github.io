<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="Create your own Hubot (3) - Create scripts for your Hubot" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Devforgalaxy - Create your own Hubot (3) - Create scripts for your Hubot</title>
<link href='https://fonts.googleapis.com/css?family=Noto+Sans' rel='stylesheet' type='text/css'>
<link href="https://fonts.googleapis.com/css?family=Lato:700" rel="stylesheet">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/solarized-dark.min.css">
<link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/main.css">
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-9161307949139214",
    enable_page_level_ads: true
  });
</script>

</head>
<body>
<div class="container-fluid">
<!-- Header -->
<div class="row h-wrapper">
<div class="hidden-xs col-sm-2"></div>
<div class="col-sm-8"><a class="h-circle-blue pull-left mt17 mr10"></a>
<a class="h-logo pull-left mt10 mb10" href="/">Devforgalaxy</a>
<a class="pull-right mt14" href="/about">About</a>
</div>
<div class="hidden-xs col-sm-2"></div>
</div>
<!-- Content -->
<div class="row mt30">
<div class="hidden-xs col-sm-2"></div>
<div class="col-sm-8"><div class="a-block mt10 mb10 ml15 mr15">
<a class="a-title">Create your own Hubot (3) - Create scripts for your Hubot</a>
<p class="a-info mt20 mb20">
    <i class="fa fa-clock-o mr7"></i>Jun 15, 2017
    <i class="fa fa-tag ml15 mr7"></i>Hubot
    <a class="btn btn-info a-btn-ver pull-right" 
        href="/zh/2017/06/15/create-scripts-for-your-hubot-zh.html">中文版</a>
</p>
<p>In the previous <a class="a-hl-blue" target="_blank" href="/en/2017/04/14/install-and-set-first-hubot-en.html">post</a>, I’ve demonstrated how to install and create a new Hubot. To make it more powerful, we have to create scripts (.coffee or .js file) for our Hubots. I will show you how to do it and integrate it with Slack in this article.</p>

<p><br />
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9161307949139214" data-ad-slot="1131030106"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<p><br /></p>

<h3 id="prerequisite">Prerequisite</h3>
<p>Makre sure you have <span class="a-hl-blue">Node.js</span> and <span class="a-hl-blue">npm</span> installed on your machine:</p>
<pre><code class="bash"># Check Node.js version
nodejs -v

# Check npm version
npm -v
</code></pre>
<p><br /></p>

<h3 id="create-scripts">Create scripts</h3>
<p>Why we need scripts for Hubot? You can consider scripts as plugins. Without customized plugins, your Hubot only provides very basic features (commands). Thus, we need to create more plugins to power it. Then, how to install customized plugins? All you need to do is to put scripts into a folder name <span class="a-hl-green">scripts</span>. And don’t worry, <span class="a-hl-blue">Yo</span> already created it for us. Now, let’s create a simple script:</p>
<pre><code class="coffeescript"># This example is written in Coffescript

module.exports = (robot) -&gt;

  # Usage: show_info
  robot.respond /show_info/i, (msg) -&gt;

    # Do anything you want in here ...

    # For example: send a multi-line message back
    msg.reply """Put your information here
    and here ....
    and here ....
    """

</code></pre>
<p>In this example, I used <span class="a-hl-red">robot.respond</span> to define a command (trigger). So, when you type and execute <span class="a-hl-red">show_info</span> on Slack, Hubot will react to it by sending messages back. Besides <span class="a-hl-red">respond</span>, you can use <span class="a-hl-red">hear</span>. But there is a little difference between them (check <a class="a-hl-blue" target="_blank" href="https://hubot.github.com/docs/scripting/#hearing-and-responding">documentation</a>). Here comes a more interesting example:</p>
<pre><code class="coffeescript"># Call a HTTP API

  ...

  # Usage: call-http [param1] [param2]
  robot.respond /call-http (.*) (.*)/i, (msg) -&gt;

    # Get parameters
    data = JSON.stringify({
      param1: msg.match[1]
      param2: msg.match[2]
    })

    # Send POST Request, and return response
    msg.http('/url/to/your/service')
      .header('Content-Type', 'application/json')
      .post(data) (err, res, body) -&gt;
        if res
          if res.statusCode isnt 200
            msg.reply "Something goes wrong ..."
            return
          msg.reply "Return your data or messages"
        else
          msg.reply "Something goes wrong ..."

</code></pre>
<p><br /></p>

<h3 id="integrate-slack-with-your-hubot">Integrate Slack with your Hubot</h3>
<p>To integrate Hubot with Slack, it needs one more step. Now, Slack has not known the existence of our Hubots. Therefore, we have to register our Hubots and get API tokens. Run Slack and click <span class="a-hl-red">Apps &amp; Integrations</span>, and then chose <span class="a-hl-red">Bot</span>. After registration, you will get an API token.
<br />
<br /></p>

<h3 id="run-hubot">Run Hubot</h3>
<p>Let’s run Hubot up with the API token:</p>
<pre><code class="bash"># Don't forget to add the token
HUBOT_SLACK_TOKEN=your-api-token ./bin/hubot --adapter slack
</code></pre>
<p>A better way is to set the token as an environment variable. Now, you can type and test your commands in a Slack channel with your bot.
<br />
<br /></p>

<p><br /></p>
<h3>You might also like:</h3>
<ul id="more-posts"></ul>

<p><br /></p>

<hr />

</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
$(function() {
  fetch('/posts-en.json')
    .then(function(response) {
      return response.json();
    })
    .then(function(json) {
      var element = $('#more-posts');
      var contents = '';
      for (var count = 0; count < 8; ++count) {
          var index = Math.floor(Math.random() * json.length);
          var post = json[index];
          link = "<li><a class='a-hl-blue' href='" + post.href + "'>" + post.title + "</a></li>";
          contents = contents + link;
          json.splice(index, 1);
      }
      element.html(contents);
    }).catch(function(error) {
      console.error(error);
    });
});
</script>
</div>
<div class="hidden-xs col-sm-2"></div>
</div>
<!-- Footer -->
<div class="row">
<div class="hidden-xs col-sm-2"></div>
<div class="col-sm-8"><br/>
<div class="a-block mt5 mb30 ml15 mr15 text-center">
<p class="a-contact">
If you have any suggestions, questions or even find some typos, feel free to contact me. Thank you! :)
</p>
<p class="a-contact">
<i class="fa fa-envelope-o mr5"></i>zeckli.devforgalaxy@gmail.com&nbsp;&nbsp;
&copy;&nbsp;2015-2017 zeckli, thanks to <u>Jekyll</u> and <u>GitHub</u>.
</p>
</div>
</div>
<div class="hidden-xs col-sm-2"></div>
</div>
</div>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-44444174-6', 'auto');
ga('send', 'pageview');
</script>
</body>
</html>
